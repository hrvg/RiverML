<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Processing benchmark results • RiverML</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Processing benchmark results">
<meta property="og:description" content="RiverML">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RiverML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/RiverML.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Data preparation</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/make_target_dataset.html">Making the target dataset</a>
        </li>
        <li>
          <a href="../articles/make_training_dataset.html">Making the training dataset</a>
        </li>
      </ul>
</li>
    <li class="divider">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Machine learning models</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/ML_training.html">Training complete benchmark</a>
        </li>
        <li>
          <a href="../articles/processing_benchmark_results.html">Processing benchmark results</a>
        </li>
        <li>
          <a href="../articles/making_predictions.html">Making predictions</a>
        </li>
      </ul>
</li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="processing_benchmark_results_files/header-attrs-2.5/header-attrs.js"></script><link href="processing_benchmark_results_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="processing_benchmark_results_files/anchor-sections-1.0/anchor-sections.js"></script><script src="processing_benchmark_results_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Processing benchmark results</h1>
            
      
      
      <div class="hidden name"><code>processing_benchmark_results.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">RiverML</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)</pre></body></html></div>
<div id="merging-benchmark-results" class="section level1">
<h1 class="hasAnchor">
<a href="#merging-benchmark-results" class="anchor"></a>Merging benchmark results</h1>
<p>The output files from the HPC are organized with one folder per learner and sub-folders for regions. The following snippet merges all the benchmark results using <code><a href="../reference/getAllBMRS.html">getAllBMRS()</a></code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">PATH</span> <span class="kw">&lt;-</span> <span class="st">"F:/hguillon/research/regional_benchmark/"</span>
<span class="no">dirs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.dirs</a></span>(<span class="no">PATH</span>, <span class="kw">recursive</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">full.names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="no">bmrs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">dirs</span>, <span class="kw">function</span>(<span class="no">dir</span>){<span class="fu"><a href="../reference/getAllBMRS.html">getAllBMRS</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">PATH</span>, <span class="no">dir</span>), <span class="kw">pattern</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">dir</span>, <span class="st">"_"</span>))})
<span class="no">bmrs_perf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">bmrs</span>, <span class="kw">function</span>(<span class="no">bmr</span>) <span class="no">bmr</span>$<span class="no">perf</span>)
<span class="no">bmrs_tune</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">bmrs</span>[<span class="no">dirs</span> <span class="kw">!=</span> <span class="st">"baseline"</span>], <span class="kw">function</span>(<span class="no">bmr</span>) <span class="no">bmr</span>$<span class="no">tune</span>  <span class="kw">%&gt;%</span> <span class="fu">distinct</span>())

<span class="no">BMR_res</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>()
<span class="no">BMR_res</span>$<span class="no">perf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(<span class="no">rbind</span>, <span class="no">bmrs_perf</span>)
<span class="no">BMR_res</span>$<span class="no">tune</span> <span class="kw">&lt;-</span>  <span class="no">bmrs_tune</span><span class="kw">[[</span><span class="fl">1</span>]]
<span class="kw">for</span> (<span class="no">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(<span class="no">bmrs_tune</span>)[-<span class="fl">1</span>]) <span class="no">BMR_res</span>$<span class="no">tune</span> <span class="kw">&lt;-</span> <span class="fu">full_join</span>(<span class="no">BMR_res</span>$<span class="no">tune</span>, <span class="no">bmrs_tune</span><span class="kw">[[</span><span class="no">i</span>]])</pre></body></html></div>
<p>The associated results in <code>BMR_res</code> are provided with the package.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"BMR_res"</span>)
<span class="no">BMR_perf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getBMR_perf_tune.html">getBMR_perf_tune</a></span>(<span class="no">BMR_res</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"perf"</span>)
<span class="no">BMR_perf</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span>(<span class="fl">10</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">format</span> <span class="kw">=</span> <span class="st">"html"</span>, <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"benchmark results"</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>)) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span>(<span class="kw">width</span> <span class="kw">=</span> <span class="st">"7in"</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="st">"5in"</span>)</pre></body></html></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:5in; overflow-x: scroll; width:7in; ">
<table class="table table table-hover table-condensed">
<caption>
benchmark results
</caption>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
task.id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
learner.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
iter
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
multiclass.au1u
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
acc
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mmce
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
multiclass.aunu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
timetrain
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
FS_NUM
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0.968
</td>
<td style="text-align:right;">
0.853
</td>
<td style="text-align:right;">
0.147
</td>
<td style="text-align:right;">
0.967
</td>
<td style="text-align:right;">
130.775
</td>
<td style="text-align:right;">
45
</td>
</tr>
<tr>
<td style="text-align:left;">
SECA
</td>
<td style="text-align:left;">
naiveBayes
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.950
</td>
<td style="text-align:right;">
0.667
</td>
<td style="text-align:right;">
0.333
</td>
<td style="text-align:right;">
0.871
</td>
<td style="text-align:right;">
0.040
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
SAC
</td>
<td style="text-align:left;">
naiveBayes
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
0.836
</td>
<td style="text-align:right;">
0.255
</td>
<td style="text-align:right;">
0.745
</td>
<td style="text-align:right;">
0.759
</td>
<td style="text-align:right;">
0.010
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
K
</td>
<td style="text-align:left;">
kknn
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
0.944
</td>
<td style="text-align:right;">
0.848
</td>
<td style="text-align:right;">
0.152
</td>
<td style="text-align:right;">
0.939
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
nnTrain
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
0.819
</td>
<td style="text-align:right;">
0.462
</td>
<td style="text-align:right;">
0.538
</td>
<td style="text-align:right;">
0.784
</td>
<td style="text-align:right;">
1205.046
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
SJT
</td>
<td style="text-align:left;">
kknn
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0.992
</td>
<td style="text-align:right;">
0.750
</td>
<td style="text-align:right;">
0.250
</td>
<td style="text-align:right;">
0.992
</td>
<td style="text-align:right;">
0.010
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
K
</td>
<td style="text-align:left;">
naiveBayes
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.904
</td>
<td style="text-align:right;">
0.656
</td>
<td style="text-align:right;">
0.344
</td>
<td style="text-align:right;">
0.905
</td>
<td style="text-align:right;">
0.010
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
0.939
</td>
<td style="text-align:right;">
0.794
</td>
<td style="text-align:right;">
0.206
</td>
<td style="text-align:right;">
0.941
</td>
<td style="text-align:right;">
64.493
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
SFE
</td>
<td style="text-align:left;">
featureless
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
0.500
</td>
<td style="text-align:right;">
0.095
</td>
<td style="text-align:right;">
0.905
</td>
<td style="text-align:right;">
0.500
</td>
<td style="text-align:right;">
0.030
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
kknn
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
0.858
</td>
<td style="text-align:right;">
0.615
</td>
<td style="text-align:right;">
0.385
</td>
<td style="text-align:right;">
0.849
</td>
<td style="text-align:right;">
0.030
</td>
<td style="text-align:right;">
18
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="processing-benchmark-results" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-benchmark-results" class="anchor"></a>Processing benchmark results</h1>
<div id="performance-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#performance-plots" class="anchor"></a>Performance plots</h2>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/makeAverageAUCPlot.html">makeAverageAUCPlot</a></span>(<span class="no">BMR_perf</span>) + <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>, <span class="fl">25</span>, <span class="fl">50</span>))</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/performance%20plots-1.png" width="672"></p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/makeAverageAccPlot.html">makeAverageAccPlot</a></span>(<span class="no">BMR_perf</span>) + <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>, <span class="fl">25</span>, <span class="fl">50</span>))</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/performance%20plots-2.png" width="672"></p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/makeTotalTimetrainPlot.html">makeTotalTimetrainPlot</a></span>(<span class="no">BMR_perf</span>) + <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>, <span class="fl">25</span>, <span class="fl">50</span>))</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/performance%20plots-3.png" width="672"></p>
</div>
<div id="model-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#model-selection" class="anchor"></a>Model selection</h2>
<p>The model selection is handled by examining statistical differences between the distribution of performance metrics for successive iterations of model training with an increasing number of predictors. On the following graph, the brackets indicate statistically significant differences between the distribution assessed by a Dunn test for the <code>SAC</code> region and the <code>randomForest</code> learner.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/makeExampleModelSelectionPlot.html">makeExampleModelSelectionPlot</a></span>(<span class="no">BMR_perf</span>, <span class="kw">lrn</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"randomForest"</span>), <span class="kw">window_size</span> <span class="kw">=</span> <span class="fl">7</span>)<span class="kw">[[</span><span class="st">"SAC"</span>]]</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/example%20of%20model%20selection-1.png" width="672"></p>
<p>The p-value is internally ajusted to take into account multiple comparison with a Bonferroni correction. The search window influence (<code>window_size</code>) is examined with <code><a href="../reference/makeWindowInfluencePlot.html">makeWindowInfluencePlot()</a></code> which requires use to declare where we are storing the names of the selected features for each iterations.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">selectedPATH</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/selectedFeatures/"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"RiverML"</span>)</pre></body></html></div>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/makeWindowInfluencePlot.html">makeWindowInfluencePlot</a></span>(<span class="no">BMR_perf</span>, <span class="no">selectedPATH</span>, <span class="kw">lrn</span> <span class="kw">=</span> <span class="st">"randomForest"</span>) +
    <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">20</span>))</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/influence%20of%20window%20size-1.png" width="672"></p>
<p>The window size selection is mainly based on the evolution of the number of optimal predictors per classes in a given region of study with respect to the window size. This balances a trade-off between two effects. A large window increases the likelihood to find a statistically different performance distribution is high and selects a large number of predictors. A small window decreases the likelihood to find statistically significant difference but might miss the inclusion of an important predictor leading to a significant increase in performance. In our example above, with a window size of 8, there is a major jump in the number of predictors per class which increases the likelihood of overfit for the optimal models.</p>
</div>
<div id="feature-importance" class="section level2">
<h2 class="hasAnchor">
<a href="#feature-importance" class="anchor"></a>Feature importance</h2>
<p>The optimal feature sets are obtained for each learner by using <code><a href="../reference/get_bestFeatureSets.html">get_bestFeatureSets()</a></code>.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">bestFeatureSets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_bestFeatureSets.html">get_bestFeatureSets</a></span>(<span class="no">BMR_perf</span>, <span class="no">selectedPATH</span>, <span class="kw">window_size</span> <span class="kw">=</span> <span class="fl">7</span>)</pre></body></html></div>
<p>A convenience function, <code>makeAllFeatureImportancePlotsFS()</code>, creates all the feature importance plots from the standpoint of feature selection, that is evaluating which feature is present in the optimal feature sets. Here is an example for the <code>SFE</code> region.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">FeatureImportancePlots</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/makeAllFeatureImportancePlotFS.html">makeAllFeatureImportancePlotFS</a></span>(<span class="no">BMR_perf</span>, <span class="no">selectedPATH</span>, <span class="no">bestFeatureSets</span>)
<span class="no">FeatureImportancePlots</span><span class="kw">[[</span><span class="st">"SFE"</span>]]</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/all%20feature%20importance%20plots-1.png" width="672"></p>
<p>We can also investigate which features are often selected across all regions with <code><a href="../reference/getFreqBestFeatureSets.html">getFreqBestFeatureSets()</a></code>.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">freq_bestFeatureSets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getFreqBestFeatureSets.html">getFreqBestFeatureSets</a></span>(<span class="no">bestFeatureSets</span>)
<span class="no">freq_bestFeatureSets</span> <span class="kw">%&gt;%</span>
    <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span>(<span class="kw">var</span> <span class="kw">=</span> <span class="no">group</span>, <span class="kw">Overall</span> <span class="kw">=</span> <span class="no">prop</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(-<span class="no">Overall</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="../reference/makeFeatureImportancePlot.html">makeFeatureImportancePlot</a></span>(<span class="kw">first</span> <span class="kw">=</span> <span class="fl">20</span>) +
    <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Top 20 predictors in optimal RF models"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"variable importance across all areas of study"</span>)</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/regional%20varimp-1.png" width="672"></p>
</div>
<div id="performance-of-optimal-models" class="section level2">
<h2 class="hasAnchor">
<a href="#performance-of-optimal-models" class="anchor"></a>Performance of optimal models</h2>
<p>We now turn to analyzing the tuning result contained in <code>BMR_tune</code>.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">BMR_tune</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getBMR_perf_tune.html">getBMR_perf_tune</a></span>(<span class="no">BMR_res</span>, <span class="kw">type</span> <span class="kw">=</span> <span class="st">"tune"</span>)
<span class="no">BMR_tune</span> <span class="kw">%&gt;%</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span>(<span class="fl">10</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>(<span class="kw">digits</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">format</span> <span class="kw">=</span> <span class="st">"html"</span>, <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"benchmark results"</span>) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"hover"</span>, <span class="st">"condensed"</span>)) <span class="kw">%&gt;%</span>
    <span class="kw pkg">kableExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span>(<span class="kw">width</span> <span class="kw">=</span> <span class="st">"7in"</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="st">"5in"</span>)</pre></body></html></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:5in; overflow-x: scroll; width:7in; ">
<table class="table table table-hover table-condensed">
<caption>
benchmark results
</caption>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
task.id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
learner.id
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
iter
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
max.number.of.layers
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hidden
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
activationfun
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
output
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
numepochs
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
learningrate
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
batchsize
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
momentum
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
hidden_dropout
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
visible_dropout
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
multiclass.au1u
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
acc
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mmce
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
multiclass.aunu
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
timetrain
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
FS_NUM
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
mtry
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
cost
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
kernel
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
SFE
</td>
<td style="text-align:left;">
svm
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.963
</td>
<td style="text-align:right;">
0.841
</td>
<td style="text-align:right;">
0.159
</td>
<td style="text-align:right;">
0.959
</td>
<td style="text-align:right;">
0.085
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:left;">
linear
</td>
</tr>
<tr>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
svm
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.928
</td>
<td style="text-align:right;">
0.764
</td>
<td style="text-align:right;">
0.236
</td>
<td style="text-align:right;">
0.910
</td>
<td style="text-align:right;">
0.037
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.00
</td>
<td style="text-align:left;">
linear
</td>
</tr>
<tr>
<td style="text-align:left;">
NCC
</td>
<td style="text-align:left;">
svm
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.954
</td>
<td style="text-align:right;">
0.773
</td>
<td style="text-align:right;">
0.227
</td>
<td style="text-align:right;">
0.943
</td>
<td style="text-align:right;">
0.116
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1024.00
</td>
<td style="text-align:left;">
linear
</td>
</tr>
<tr>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.866
</td>
<td style="text-align:right;">
0.592
</td>
<td style="text-align:right;">
0.408
</td>
<td style="text-align:right;">
0.819
</td>
<td style="text-align:right;">
0.083
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
NCC
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.956
</td>
<td style="text-align:right;">
0.732
</td>
<td style="text-align:right;">
0.268
</td>
<td style="text-align:right;">
0.939
</td>
<td style="text-align:right;">
0.300
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SCC
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.934
</td>
<td style="text-align:right;">
0.669
</td>
<td style="text-align:right;">
0.331
</td>
<td style="text-align:right;">
0.916
</td>
<td style="text-align:right;">
0.142
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SECA
</td>
<td style="text-align:left;">
randomForest
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.954
</td>
<td style="text-align:right;">
0.753
</td>
<td style="text-align:right;">
0.247
</td>
<td style="text-align:right;">
0.936
</td>
<td style="text-align:right;">
0.104
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SCC
</td>
<td style="text-align:left;">
svm
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.918
</td>
<td style="text-align:right;">
0.568
</td>
<td style="text-align:right;">
0.432
</td>
<td style="text-align:right;">
0.873
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
256.00
</td>
<td style="text-align:left;">
linear
</td>
</tr>
<tr>
<td style="text-align:left;">
SFE
</td>
<td style="text-align:left;">
nnTrain
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:left;">
tanh
</td>
<td style="text-align:left;">
softmax
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.969
</td>
<td style="text-align:right;">
0.812
</td>
<td style="text-align:right;">
0.188
</td>
<td style="text-align:right;">
0.960
</td>
<td style="text-align:right;">
0.806
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SECA
</td>
<td style="text-align:left;">
svm
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.902
</td>
<td style="text-align:right;">
0.470
</td>
<td style="text-align:right;">
0.530
</td>
<td style="text-align:right;">
0.830
</td>
<td style="text-align:right;">
0.096
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
512.00
</td>
<td style="text-align:left;">
linear
</td>
</tr>
</tbody>
</table>
</div>
<p>This data is subsetted by the optimal model selection with <code><a href="../reference/getBestBMRTune.html">getBestBMRTune()</a></code>. The resulting <code>data.frame</code> can be visualized with <code><a href="../reference/makeBestTuneAUCPlot.html">makeBestTuneAUCPlot()</a></code> to compare the results of the optimal models.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">bestBMR_tune</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getBestBMRTune.html">getBestBMRTune</a></span>(<span class="no">BMR_tune</span>, <span class="no">bestFeatureSets</span>)
<span class="fu"><a href="../reference/makeBestTuneAUCPlot.html">makeBestTuneAUCPlot</a></span>(<span class="no">bestBMR_tune</span>)</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/subsetting%20and%20visualizing%20AUC%20for%20optimal%20models-1.png" width="672"></p>
</div>
<div id="tuning-entropy" class="section level2">
<h2 class="hasAnchor">
<a href="#tuning-entropy" class="anchor"></a>Tuning entropy</h2>
<p>Because the benchmark used nested resampling, we have access to a distribution of best tune hyper-parameters which can be visualized with <code><a href="../reference/getTunePlot.html">getTunePlot()</a></code>.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/getTunePlot.html">getTunePlot</a></span>(<span class="no">bestBMR_tune</span>, <span class="st">"nnTrain"</span>)</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/detailed%20tuning%20entropy-1.png" width="672"></p>
<p>In addition, while the previous plot focused on the optimal, we can investigate how the tuning entropy evolves with the number of selected features using <code><a href="../reference/getBMRTuningEntropy.html">getBMRTuningEntropy()</a></code>, <code><a href="../reference/getBestBMRTuningEntropy.html">getBestBMRTuningEntropy()</a></code>, and <code><a href="../reference/makeTuningEntropyPlot.html">makeTuningEntropyPlot()</a></code>. Here is one example for the <code>SFE</code> region.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">TUNELENGTH</span> <span class="kw">&lt;-</span> <span class="fl">16</span>
<span class="no">BMR_lrnH</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getBMRTuningEntropy.html">getBMRTuningEntropy</a></span>(<span class="no">BMR_tune</span>, <span class="no">TUNELENGTH</span>)
<span class="no">bestBMR_lrnH</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getBestBMRTuningEntropy.html">getBestBMRTuningEntropy</a></span>(<span class="no">BMR_lrnH</span>, <span class="no">bestFeatureSets</span>, <span class="no">bestBMR_tune</span>)
<span class="no">p_Hnorms</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/makeTuningEntropyPlot.html">makeTuningEntropyPlot</a></span>(<span class="no">BMR_lrnH</span>, <span class="no">bestBMR_lrnH</span>)
<span class="no">p_Hnorms</span><span class="kw">[[</span><span class="st">"SFE"</span>]]</pre></body></html></div>
<p><img src="processing_benchmark_results_files/figure-html/tuning%20entropy-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hervé Guillon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
